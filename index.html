<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GUARDIAN SLAYER - Online Multiplayer</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- PeerJS f√ºr WebRTC P2P -->
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>

    <!-- ============ HOMESCREEN ============ -->
    <div id="homescreen" class="screen">
        <div class="bg-gradient"></div>
        <div class="grid-overlay"></div>
        
        <div class="floating-shapes">
            <svg class="shape" width="60" height="60" viewBox="0 0 60 60">
                <polygon points="30,0 60,30 30,60 0,30" fill="none" stroke="#a855f7" stroke-width="2"/>
            </svg>
            <svg class="shape" width="40" height="40" viewBox="0 0 40 40">
                <polygon points="20,0 40,20 20,40 0,20" fill="none" stroke="#38bdf8" stroke-width="2"/>
            </svg>
            <svg class="shape" width="50" height="50" viewBox="0 0 50 50">
                <polygon points="25,0 50,25 25,50 0,25" fill="none" stroke="#f472b6" stroke-width="2"/>
            </svg>
            <svg class="shape" width="35" height="35" viewBox="0 0 35 35">
                <polygon points="17.5,0 35,17.5 17.5,35 0,17.5" fill="none" stroke="#a855f7" stroke-width="2"/>
            </svg>
        </div>

        <div class="title-container">
            <div class="pre-title">‚¨• Online Multiplayer ‚¨•</div>
            <h1 class="main-title">GUARDIAN SLAYER</h1>
            <div class="sub-title">Wer t√∂tet den W√§chter zuerst?</div>
                        </div>

        <div class="btn-group">
            <button class="btn primary" onclick="gameManager.hostGame()">
                ‚ñ∂ SPIEL ERSTELLEN
            </button>
            <button class="btn" onclick="gameManager.showJoinScreen()">
                ‚åò SPIEL BEITRETEN
            </button>
                    </div>

        <div class="controls-info">
            <div class="control-group p1">
                <h4>SPIELER 1</h4>
                <div class="keys-row"><span class="key">W</span></div>
                <div class="keys-row">
                    <span class="key">A</span>
                    <span class="key">S</span>
                    <span class="key">D</span>
                </div>
                <div class="control-desc">Bewegen & Springen</div>
                <div class="keys-row" style="margin-top: 8px;">
                    <span class="key">F</span>
                    <span class="key">G</span>
                    <span class="key">H</span>
                </div>
                <div class="control-desc">Angriff ¬∑ Schuss ¬∑ Heal</div>
            </div>
            
            <div class="control-group p2">
                <h4>SPIELER 2</h4>
                <div class="keys-row"><span class="key">‚Üë</span></div>
                <div class="keys-row">
                    <span class="key">‚Üê</span>
                    <span class="key">‚Üì</span>
                    <span class="key">‚Üí</span>
            </div>
                <div class="control-desc">Bewegen & Springen</div>
                <div class="keys-row" style="margin-top: 8px;">
                    <span class="key">1</span>
                    <span class="key">2</span>
                    <span class="key">3</span>
        </div>
                <div class="control-desc">Angriff ¬∑ Schuss ¬∑ Heal</div>
            </div>
        </div>
    </div>

    <!-- ============ LOBBY: HOST ============ -->
    <div id="lobby-host" class="screen hidden">
        <div class="bg-gradient"></div>
        <div class="grid-overlay"></div>
        
        <button class="back-btn" onclick="gameManager.goToMenu()">‚Üê ZUR√úCK</button>

        <div class="panel">
            <div class="panel-title">SPIEL ERSTELLT</div>
            
            <div class="session-display">
                <div class="session-label">SESSION-ID</div>
                <div class="session-id" id="session-id">------</div>
                <button class="copy-btn" onclick="gameManager.copySessionId()">üìã KOPIEREN</button>
            </div>
            
            <p style="text-align: center; color: #64748b; font-size: 14px; margin-bottom: 20px;">
                Teile diese ID mit deinem Gegner!
            </p>
            
            <div class="status waiting" id="connection-status">
                <span class="spinner"></span> Warte auf Spieler 2...
            </div>
            
            <div class="players-container">
                <div class="player-card p1 ready">
                    <div class="player-label">SPIELER 1</div>
                    <div class="player-status">DU ‚úì</div>
                </div>
                <div class="player-card p2" id="p2-card">
                    <div class="player-label">SPIELER 2</div>
                    <div class="player-status">Wartet...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============ LOBBY: JOIN ============ -->
    <div id="lobby-join" class="screen hidden">
        <div class="bg-gradient"></div>
        <div class="grid-overlay"></div>
        
        <button class="back-btn" onclick="gameManager.goToMenu()">‚Üê ZUR√úCK</button>

        <div class="panel">
            <div class="panel-title">SPIEL BEITRETEN</div>
            
            <div class="form-group">
                <label class="form-label">Session-ID eingeben</label>
                <input type="text" 
                       class="form-input" 
                       id="session-input" 
                       placeholder="Z.B. ABC123"
                       maxlength="6"
                       autocomplete="off"
                       oninput="this.value = this.value.toUpperCase()">
            </div>
            
            <div class="status error hidden" id="join-error">
                Fehler beim Beitreten
            </div>
            
            <button class="btn success" onclick="gameManager.joinGame()" style="width: 100%;">
                VERBINDEN
            </button>
        </div>
    </div>

    <!-- ============ LOBBY: WAITING (f√ºr Joiner) ============ -->
    <div id="lobby-waiting" class="screen hidden">
        <div class="bg-gradient"></div>
        <div class="grid-overlay"></div>

        <div class="panel">
            <div class="panel-title">VERBINDE...</div>
            
            <div class="status waiting">
                <span class="spinner"></span> Verbinde zum Spiel...
            </div>
        </div>
    </div>

    <!-- ============ GAME SCREEN ============ -->
    <div id="gamescreen" class="screen hidden">
        <div class="game-container">
            <div class="player-viewport">
                <canvas id="game-canvas"></canvas>
                
                <div class="game-hud">
                    <div class="hud-section">
                        <div class="player-tag" id="player-tag">SPIELER 1</div>
                        <div class="hp-container">
                            <div class="hp-fill" id="player-hp" style="width: 100%"></div>
                        </div>
                    </div>
                    <div class="hud-section right">
                        <div class="ability-indicator ready" id="atk-status">ATK ‚úì</div>
                        <div class="ability-indicator ready" id="shot-status">SHOT ‚úì</div>
                        <div class="ability-indicator ready" id="heal-status">HEAL ‚úì</div>
                    </div>
                </div>
                
                <div class="boss-hud" id="boss-hud">
                    <div class="boss-name">‚óÜ DER W√ÑCHTER ‚óÜ</div>
                    <div class="boss-hp-container">
                        <div class="boss-hp-fill" id="boss-hp" style="width: 100%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="match-timer">00:00.0</div>

        <div id="center-ui">
            <div class="countdown-display" id="countdown" style="display: none;"></div>
            
            <div class="winner-panel" id="winner-panel">
                <div class="winner-label">üèÜ GEWINNER üèÜ</div>
                <div class="winner-name" id="winner-name">SPIELER 1</div>
                <div class="winner-time" id="winner-time">Zeit: 00:00.0</div>
                <button class="btn primary" onclick="gameManager.restartGame()">REMATCH</button>
                <button class="btn" onclick="gameManager.goToMenu()">MEN√ú</button>
            </div>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script src="js/classes.js"></script>
    <script src="js/network.js"></script>
    <script src="js/game.js"></script>

</body>
</html>
